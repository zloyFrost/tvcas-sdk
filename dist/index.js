import c from"node-fetch";var a=class{constructor(r,t="http://tvcas.local/api.php"){if(!r)throw new Error("API key is required");this.apiKey=r,this.baseUrl=t}async cardInfo(r,t){if(!r)throw new Error("serialNo is required");let s=new URL(this.baseUrl);s.searchParams.set("api_key",this.apiKey),s.searchParams.set("serial_no",r),t&&Object.entries(t).forEach(([n,o])=>{s.searchParams.set(`set[${n}]`,String(o))});let i=await c(s.toString());if(!i.ok)throw new Error(`HTTP error: ${i.status}`);let e=await i.json();if(typeof e=="string"&&new Set(["NOT_VALID_API_KEY","SMARTCARD_NOT_FOUND","UNKNOWN_SET_PARAMETER","ACCESS_CRITERIA_ERROR","PAIR_ERROR","START_ERROR","FINISH_ERROR"]).has(e))throw new Error(`TVCAS API error: ${e}`);return e}};export{a as TVCASClient};

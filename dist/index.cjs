"use strict";var g=Object.create;var n=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var A=(t,r)=>{for(var s in r)n(t,s,{get:r[s],enumerable:!0})},c=(t,r,s,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of _(r))!I.call(t,e)&&e!==s&&n(t,e,{get:()=>r[e],enumerable:!(i=h(r,e))||i.enumerable});return t};var S=(t,r,s)=>(s=t!=null?g(E(t)):{},c(r||!t||!t.__esModule?n(s,"default",{value:t,enumerable:!0}):s,t)),d=t=>c(n({},"__esModule",{value:!0}),t);var w={};A(w,{TVCASClient:()=>o});module.exports=d(w);var R=S(require("node-fetch"),1),o=class{constructor(r,s="http://tvcas.local/api.php"){if(!r)throw new Error("API key is required");this.apiKey=r,this.baseUrl=s}async cardInfo(r,s){if(!r)throw new Error("serialNo is required");let i=new URL(this.baseUrl);i.searchParams.set("api_key",this.apiKey),i.searchParams.set("serial_no",r),s&&Object.entries(s).forEach(([f,p])=>{i.searchParams.set(`set[${f}]`,String(p))});let e=await(0,R.default)(i.toString());if(!e.ok)throw new Error(`HTTP error: ${e.status}`);let a=await e.json();if(typeof a=="string"&&new Set(["NOT_VALID_API_KEY","SMARTCARD_NOT_FOUND","UNKNOWN_SET_PARAMETER","ACCESS_CRITERIA_ERROR","PAIR_ERROR","START_ERROR","FINISH_ERROR"]).has(a))throw new Error(`TVCAS API error: ${a}`);return a}};0&&(module.exports={TVCASClient});
